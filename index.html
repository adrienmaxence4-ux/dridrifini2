<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Espace CrÃ©atif - VÃ©rif pseudo (simulÃ©e)</title>
  <style>
    body{
      font-family: "Poppins",sans-serif;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      margin:0;
      background: linear-gradient(135deg,#ffe29f,#ffa99f);
      color:#222;
      padding:20px;
      box-sizing:border-box;
    }
    .card{
      background:rgba(255,255,255,0.95);
      padding:22px;
      border-radius:12px;
      width:100%;
      max-width:480px;
      box-shadow:0 8px 30px rgba(0,0,0,0.12);
      text-align:center;
    }
    h1{margin:0 0 14px;font-size:1.6rem}
    .btn{
      background:#fff;border:none;border-radius:10px;padding:12px 18px;margin:8px;font-size:1rem;cursor:pointer;transition:all .18s;
    }
    .btn:hover{transform:scale(1.03)}
    input,select{
      width:100%;padding:10px;border-radius:8px;border:1px solid #cfcfcf;margin-top:8px;font-size:0.98rem;
      box-sizing:border-box;
    }
    #formulaire{display:none;margin-top:12px;text-align:left}
    #result{margin-top:14px;font-weight:600;white-space:pre-line}
    .spinner{
      display:inline-block;width:18px;height:18px;border:3px solid rgba(0,0,0,0.15);border-top-color:#333;border-radius:50%;
      animation:spin .9s linear infinite;vertical-align:middle;margin-right:8px;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .small{font-size:0.9rem;color:#555}
  </style>
</head>
<body>
  <div class="card">
    <h1>ğŸ¨ Espace CrÃ©atif â€” Soumission artiste</h1>

    <div id="choice">
      <button class="btn" onclick="choose('artiste')">Je suis Artiste</button>
      <button class="btn" onclick="choose('visiteur')">Je suis Visiteur</button>
    </div>

    <div id="formulaire">
      <label class="small">ğŸ–Œï¸ Pseudo Discord (ex: @MonPseudo) :</label>
      <input id="nom" type="text" placeholder="@MonPseudo" />

      <label class="small" style="margin-top:10px">ğŸ­ Domaine artistique :</label>
      <select id="domaine">
        <option value="">-- Choisissez votre domaine --</option>
        <option>ğŸ¨ Dessin / Illustration</option>
        <option>ğŸ–Œï¸ Peinture</option>
        <option>ğŸ“· Photographie</option>
        <option>ğŸ¬ VidÃ©o / Montage</option>
        <option>ğŸµ Musique</option>
        <option>ğŸ¤ Chant</option>
        <option>ğŸ’» Arts numÃ©riques</option>
        <option>ğŸ§µ Couture / Mode</option>
        <option>ğŸ§± Sculpture / 3D</option>
        <option>ğŸ“š Ã‰criture</option>
      </select>

      <label class="small" style="margin-top:10px">ğŸ–¼ï¸ Lien vers votre travail :</label>
      <input id="lien" type="url" placeholder="https://instagram.com/monpseudo" />

      <div style="display:flex;gap:8px;margin-top:12px">
        <button class="btn" onclick="submitArtist()" style="flex:1">Envoyer pour vÃ©rif</button>
        <button class="btn" onclick="resetForm()" style="flex:0">Annuler</button>
      </div>
    </div>

    <div id="result"></div>
  </div>

  <script>
    // ğŸ”§ Remplace par ton webhook Discord (ex: https://discord.com/api/webhooks/xxx/yyy)
    const webhookURL = "TON_WEBHOOK_ICI";

    function choose(role){
      document.getElementById('choice').style.display = 'none';
      const form = document.getElementById('formulaire');
      const result = document.getElementById('result');
      result.innerText = '';
      if(role === 'artiste'){
        form.style.display = 'block';
      } else {
        form.style.display = 'none';
        result.innerText = "ğŸ‘‹ Bienvenue visiteur ! Ton arrivÃ©e a Ã©tÃ© notifiÃ©e sur Discord.";
        sendVisitorToDiscord();
      }
    }

    function resetForm(){
      document.getElementById('choice').style.display = 'block';
      document.getElementById('formulaire').style.display = 'none';
      document.getElementById('result').innerText = '';
      document.getElementById('nom').value = '';
      document.getElementById('domaine').selectedIndex = 0;
      document.getElementById('lien').value = '';
    }

    // Fonction qui "simule" la vÃ©rification du pseudo (cÃ´tÃ© client)
    function simulatePseudoCheck(pseudo){
      // heuristique simple :
      // - si contient '@' => meilleure chance d'Ãªtre trouvÃ©
      // - si longueur < 2 => impossible
      // on renvoie {found: bool, reason: string}
      if(!pseudo || pseudo.length < 2) return {found:false, reason:'Pseudo invalide'};
      const hasAt = pseudo.includes('@');
      // probabilitÃ© : 80% si '@', 50% sinon
      const prob = hasAt ? 0.8 : 0.5;
      const found = Math.random() < prob;
      return found ? {found:true, reason:'SimulÃ© : pseudo trouvÃ©'} : {found:false, reason:'SimulÃ© : pseudo non trouvÃ©'};
    }

    function submitArtist(){
      const nom = document.getElementById('nom').value.trim();
      const domaine = document.getElementById('domaine').value.trim();
      const lien = document.getElementById('lien').value.trim();
      const resultEl = document.getElementById('result');

      if(!nom || !domaine || !lien){
        resultEl.innerText = "â— Merci de remplir tous les champs (pseudo, domaine, lien).";
        return;
      }

      // affichage du chargement
      resultEl.innerHTML = '<span class="spinner"></span>VÃ©rification du pseudo en cours...';

      // dÃ©lai pour simuler la vÃ©rif (1.2s Ã  2.2s)
      const delay = 1200 + Math.floor(Math.random()*1000);
      setTimeout(() => {
        const check = simulatePseudoCheck(nom);
        if(check.found){
          resultEl.innerHTML = "âœ… Pseudo simulÃ© : trouvÃ© sur le serveur.\nâœ… Ton lien a Ã©tÃ© envoyÃ© aux modÃ©rateurs pour validation.\n(attendre la confirmation du staff)";
        } else {
          resultEl.innerHTML = "âš ï¸ Pseudo simulÃ© : introuvable.\nTon lien a quand mÃªme Ã©tÃ© envoyÃ© aux modÃ©rateurs pour vÃ©rification manuelle.";
        }

        // Envoi des donnÃ©es (inclut le rÃ©sultat de la vÃ©rif simulÃ©e)
        const payload = {
          content:
            `ğŸ¨ **Nouvelle soumission artiste (SIMULÃ‰)**\n` +
            `ğŸ‘¤ Pseudo dÃ©clarÃ© : ${nom}\n` +
            `ğŸ“‚ Domaine : ${domaine}\n` +
            `ğŸ”— Lien : ${lien}\n` +
            `ğŸ” RÃ©sultat vÃ©rif pseudo (simulÃ©e) : ${check.found ? 'trouvÃ©' : 'non trouvÃ©'}\n` +
            `âš ï¸ Note : vÃ©rification faite cÃ´tÃ© site (simulÃ©e) â€” valider manuellement via le serveur.`
        };

        // envoi POST au webhook
        fetch(webhookURL, {
          method:'POST',
          headers: { 'Content-Type':'application/json' },
          body: JSON.stringify(payload)
        }).catch(err => {
          console.error('Erreur fetch webhook:', err);
          // affiche une petite note cÃ´tÃ© utilisateur si l'envoi Ã©choue
          resultEl.innerHTML += "\n\nâ— Erreur lors de l'envoi de la notification (vÃ©rifie ton webhook).";
        });

      }, delay);
    }

    function sendVisitorToDiscord(){
      const payload = { content: "ğŸ‘€ Un nouveau visiteur vient de dÃ©couvrir le site !" };
      fetch(webhookURL, {
        method:'POST',
        headers:{ 'Content-Type':'application/json' },
        body: JSON.stringify(payload)
      }).catch(err => console.error('Erreur fetch webhook:', err));
    }
  </script>
</body>
</html>
